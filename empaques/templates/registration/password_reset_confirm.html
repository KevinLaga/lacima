{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Nueva contraseña — La Cima</title>
  <link rel="stylesheet" href="{% static 'admin/css/base.css' %}">
  <style>
    body { background:#f5f6f8; }
    .box { max-width: 480px; margin: 5rem auto; background: #fff; border:1px solid #e6e6e6;
           border-radius:8px; box-shadow:0 8px 24px rgba(0,0,0,.06); padding:2rem; }
    h1 { font-size:1.25rem; margin-bottom:.5rem; }
    .field { margin-bottom:1rem; }
    .field label { display:block; font-weight:600; margin-bottom:.35rem; }
    .field input { width:100%; padding:.625rem .75rem; border:1px solid #cfcfcf; border-radius:6px; }
    .errorlist { color:#b00020; margin:.5rem 0 1rem; }
    .actions { display:flex; justify-content:flex-end; margin-top:1rem; }
    .actions button { background:#417690; color:#fff; border:0; padding:.6rem 1rem; border-radius:6px; cursor:pointer; }
    .note { color:#666; font-size:.95rem; margin-bottom:1rem; }
  </style>
</head>
<body>
  <div class="box">
    {% if validlink %}
      <h1>Establece tu nueva contraseña</h1>
      <p class="note">Ingresa y confirma tu nueva contraseña.</p>

      {% if form.non_field_errors %}
        <ul class="errorlist">
          {% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}
        </ul>
      {% endif %}

      <form method="post">
        {% csrf_token %}
        <div class="field">
          <label for="{{ form.new_password1.id_for_label }}">Nueva contraseña</label>
          {{ form.new_password1 }}
          {% if form.new_password1.errors %}
            <ul class="errorlist">{% for e in form.new_password1.errors %}<li>{{ e }}</li>{% endfor %}</ul>
          {% endif %}
        </div>
        <div class="field">
          <label for="{{ form.new_password2.id_for_label }}">Confirmar contraseña</label>
          {{ form.new_password2 }}
          {% if form.new_password2.errors %}
            <ul class="errorlist">{% for e in form.new_password2.errors %}<li>{{ e }}</li>{% endfor %}</ul>
          {% endif %}
        </div>
        <div class="actions">
          <button type="submit">Guardar contraseña</button>
        </div>
      </form>
    {% else %}
      <h1>Enlace inválido o expirado</h1>
      <p>Solicita un nuevo enlace para restablecer tu contraseña.</p>
      <p><a href="{% url 'password_reset' %}">Volver a recuperar contraseña</a></p>
    {% endif %}
  </div>
</body>
</html>
